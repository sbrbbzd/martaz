import{u as P,a as O,q as U,f as N,i as V,S as z,T as X,r as x,j as s,U as B,V as J,W as D,X as l,Y as g,Z as S,_ as W,$ as L,a0 as Y,a1 as Z,o as A,C as K,D as Q,p as T,a2 as ss,a3 as es,a4 as E,a5 as as,a6 as p}from"./index-Ii0svv0K.js";const I=(e,n="medium",t)=>{const i={};switch(n){case"full":i.weekday="long",i.year="numeric",i.month="long",i.day="numeric";break;case"long":i.year="numeric",i.month="long",i.day="numeric";break;case"medium":i.year="numeric",i.month="short",i.day="numeric";break;case"short":i.year="2-digit",i.month="numeric",i.day="numeric";break}return new Intl.DateTimeFormat(t,i).format(e)},M=(e,n)=>{const i=new Date().getTime()-e.getTime(),r=Math.floor(i/1e3),o=Math.floor(r/60),d=Math.floor(o/60),h=Math.floor(d/24),c=new Intl.RelativeTimeFormat(n,{numeric:"auto"});return r<60?c.format(-r,"second"):o<60?c.format(-o,"minute"):d<24?c.format(-d,"hour"):h<30?c.format(-h,"day"):I(e,"medium",n)},is=()=>U(),q=e=>(e==null?void 0:e.role)==="admin",ns=()=>{const{t:e}=P();return s.jsx("div",{className:"unauthorized-view",children:s.jsxs("div",{className:"container",children:[s.jsx("h2",{children:e("common.unauthorized")}),s.jsx("p",{children:e("common.noAccess")})]})})},f=()=>async e=>{try{e(E(!0));const n={totalUsers:{count:1257},totalListings:{count:4876},pendingListings:[{id:"p1",title:"Honda Civic 2018, low mileage",user:"Murad Hasanov",category:"Vehicles",createdAt:new Date(Date.now()-2*36e5).toISOString()},{id:"p2",title:"Modern 2 bedroom apartment",user:"Leyla Ahmadova",category:"Real Estate",createdAt:new Date(Date.now()-5*36e5).toISOString()}],activeCategories:{count:32,list:["Vehicles","Real Estate","Electronics","Jobs","Home & Garden","Fashion","Services"]},userGrowth:12.5,listingGrowth:8.3,recentActivity:[{id:"1",type:"user-registered",user:"Ali Mammadov",timestamp:new Date(Date.now()-15*6e4).toISOString()},{id:"2",type:"listing-created",user:"Elvin Aliyev",title:'MacBook Pro 16" 2021',timestamp:new Date(Date.now()-47*6e4).toISOString()}]};await new Promise(t=>setTimeout(t,1e3)),e(as(n))}catch(n){e(p(n.message||"Failed to fetch dashboard data"))}finally{e(E(!1))}},ts=e=>async n=>{try{await new Promise(t=>setTimeout(t,500)),n(f())}catch(t){n(p(t.message||"Failed to approve listing"))}},cs=e=>async n=>{try{await new Promise(t=>setTimeout(t,500)),n(f())}catch(t){n(p(t.message||"Failed to reject listing"))}},ds=()=>{var C,F;const{t:e}=P(),n=O(),t=is(),i=N(V),r=N(z),o=N(X),[d,h]=x.useState(""),[c,m]=x.useState("week"),[w,k]=x.useState("all");x.useEffect(()=>{i&&q(i)&&t(f())},[t,i]);const $=a=>{t(ts())},G=a=>{t(cs())};if(!i||!q(i))return s.jsx(ns,{});if(o||!r)return s.jsx("div",{className:"admin-dashboard",children:s.jsxs("div",{className:"loading-skeleton",children:[s.jsx("div",{className:"pulse-loader"}),s.jsx("p",{children:e("admin.loading")})]})});const{totalUsers:R,totalListings:H,pendingListings:b,activeCategories:y,userGrowth:v,listingGrowth:u,recentActivity:j}=r,_=b.filter(a=>a.title.toLowerCase().includes(d.toLowerCase())||a.user.toLowerCase().includes(d.toLowerCase())||a.category.toLowerCase().includes(d.toLowerCase()));return s.jsxs("div",{className:"admin-dashboard",children:[s.jsxs("div",{className:"dashboard-header",children:[s.jsxs("div",{className:"header-title",children:[s.jsx("h1",{children:e("admin.dashboard")}),s.jsxs("div",{className:"date-display",children:[s.jsx(B,{}),s.jsx("span",{children:I(new Date,"full")})]})]}),s.jsxs("div",{className:"header-actions",children:[s.jsxs("div",{className:"search-container",children:[s.jsx(J,{className:"search-icon"}),s.jsx("input",{type:"text",className:"search-input",placeholder:e("admin.search_placeholder"),value:d,onChange:a=>h(a.target.value)})]}),s.jsxs("div",{className:"notification",children:[s.jsx(D,{}),j.length>0&&s.jsx("span",{className:"notification-count",children:j.length})]}),s.jsx("div",{className:"user-profile",children:i!=null&&i.profileImage?s.jsx("img",{src:i.profileImage,alt:i.username||i.email,className:"user-avatar"}):s.jsx("div",{className:"user-initials",children:(((C=i==null?void 0:i.firstName)==null?void 0:C[0])||((F=i==null?void 0:i.email)==null?void 0:F[0])||"").toUpperCase()})})]})]}),s.jsxs("div",{className:"stats-overview",children:[s.jsxs("div",{className:"stat-card primary",children:[s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:e("admin.total_users")}),s.jsx("div",{className:"stat-value",children:R.count}),v>0?s.jsxs("div",{className:"stat-change positive",children:[s.jsx(l,{}),s.jsxs("span",{children:["+",v,"% ",e("admin.past_month")]})]}):s.jsxs("div",{className:"stat-change negative",children:[s.jsx(l,{}),s.jsxs("span",{children:[v,"% ",e("admin.past_month")]})]})]}),s.jsx("div",{className:"stat-icon",children:s.jsx(g,{})})]}),s.jsxs("div",{className:"stat-card success",children:[s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:e("admin.active_listings")}),s.jsx("div",{className:"stat-value",children:H.count}),u>0?s.jsxs("div",{className:"stat-change positive",children:[s.jsx(l,{}),s.jsxs("span",{children:["+",u,"% ",e("admin.past_month")]})]}):s.jsxs("div",{className:"stat-change negative",children:[s.jsx(l,{}),s.jsxs("span",{children:[u,"% ",e("admin.past_month")]})]})]}),s.jsx("div",{className:"stat-icon",children:s.jsx(S,{})})]}),s.jsxs("div",{className:"stat-card warning",children:[s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:e("admin.pending_approval")}),s.jsx("div",{className:"stat-value",children:b.length}),s.jsx("div",{className:"stat-change",children:s.jsx("span",{children:e("admin.requires_attention")})})]}),s.jsx("div",{className:"stat-icon",children:s.jsx(W,{})})]}),s.jsxs("div",{className:"stat-card info",children:[s.jsxs("div",{className:"stat-info",children:[s.jsx("h3",{children:e("admin.categories")}),s.jsx("div",{className:"stat-value",children:y.count}),s.jsx("div",{className:"stat-change",children:s.jsx("span",{children:e("admin.active_categories")})})]}),s.jsx("div",{className:"stat-icon",children:s.jsx(L,{})})]})]}),s.jsxs("div",{className:"dashboard-grid",children:[s.jsxs("div",{className:"pending-listings dashboard-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("admin.pending_listings")}),s.jsxs("div",{className:"header-controls",children:[s.jsxs("div",{className:"filter-dropdown",children:[s.jsxs("button",{className:"filter-button",children:[s.jsx(Y,{}),s.jsx("span",{children:e("admin.filter")})]}),s.jsxs("div",{className:"filter-options",children:[s.jsx("button",{className:w==="all"?"active":"",onClick:()=>k("all"),children:e("admin.all_categories")}),y.list.map(a=>s.jsx("button",{className:w===a?"active":"",onClick:()=>k(a),children:a},a))]})]}),s.jsx("button",{className:"view-all-button",onClick:()=>n("/admin/listings/pending"),children:e("admin.view_all")})]})]}),s.jsx("div",{className:"card-content",children:_.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx(S,{className:"empty-icon"}),s.jsx("p",{children:e("admin.no_pending_listings")})]}):s.jsxs("div",{className:"listing-table",children:[s.jsxs("div",{className:"table-header",children:[s.jsx("div",{children:e("admin.title")}),s.jsx("div",{children:e("admin.category")}),s.jsx("div",{children:e("admin.user")}),s.jsx("div",{children:e("admin.time")}),s.jsx("div",{children:e("admin.actions")})]}),s.jsx("div",{className:"table-body",children:_.slice(0,5).map(a=>s.jsxs("div",{className:"table-row",children:[s.jsx("div",{className:"col-title",children:a.title}),s.jsx("div",{className:"col-category",children:s.jsx("span",{className:"category-tag",children:a.category})}),s.jsx("div",{className:"col-user",children:a.user}),s.jsx("div",{className:"col-time",children:M(new Date(a.createdAt))}),s.jsxs("div",{className:"col-actions",children:[s.jsx("button",{className:"action-button approve",title:e("admin.approve"),onClick:()=>$(a.id),children:s.jsx(Z,{})}),s.jsx("button",{className:"action-button reject",title:e("admin.reject"),onClick:()=>G(a.id),children:s.jsx(A,{})}),s.jsx("button",{className:"action-button view",title:e("admin.view"),onClick:()=>n(`/admin/listings/${a.id}`),children:s.jsx(K,{})})]})]},a.id))})]})})]}),s.jsxs("div",{className:"recent-activity dashboard-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("admin.recent_activity")}),s.jsx("div",{className:"header-controls",children:s.jsxs("div",{className:"period-selector",children:[s.jsx("button",{className:`period ${c==="day"?"active":""}`,onClick:()=>m("day"),children:e("admin.today")}),s.jsx("button",{className:`period ${c==="week"?"active":""}`,onClick:()=>m("week"),children:e("admin.week")}),s.jsx("button",{className:`period ${c==="month"?"active":""}`,onClick:()=>m("month"),children:e("admin.month")})]})})]}),s.jsx("div",{className:"card-content",children:j.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx(D,{className:"empty-icon"}),s.jsx("p",{children:e("admin.no_recent_activity")})]}):s.jsx("div",{className:"activity-timeline",children:j.slice(0,5).map(a=>s.jsxs("div",{className:"timeline-item",children:[s.jsxs("div",{className:`timeline-icon ${a.type}`,children:[a.type==="user-registered"&&s.jsx(g,{}),a.type==="user-updated"&&s.jsx(Q,{}),a.type==="listing-created"&&s.jsx(T,{}),a.type==="listing-reported"&&s.jsx(A,{}),a.type==="listing-sold"&&s.jsx(ss,{})]}),s.jsxs("div",{className:"timeline-content",children:[s.jsx("div",{className:"timeline-time",children:M(new Date(a.timestamp))}),s.jsx("div",{className:"timeline-body",children:s.jsxs("p",{children:[a.type==="user-registered"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:a.user})," ",e("admin.registered_new_account")]}),a.type==="user-updated"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:a.user})," ",e("admin.updated_profile")]}),a.type==="listing-created"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:a.user})," ",e("admin.created_listing")," ",s.jsx("span",{className:"highlight",children:a.title})]}),a.type==="listing-reported"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:a.reporter})," ",e("admin.reported_listing")," ",s.jsx("span",{className:"highlight",children:a.title}),s.jsx("span",{className:"report-tag",children:a.reason})]}),a.type==="listing-sold"&&s.jsxs(s.Fragment,{children:[s.jsx("strong",{children:a.user})," ",e("admin.marked_listing_sold")," ",s.jsx("span",{className:"highlight",children:a.title})]})]})})]})]},a.id))})})]}),s.jsxs("div",{className:"analytics-summary dashboard-card",children:[s.jsxs("div",{className:"card-header",children:[s.jsx("h2",{children:e("admin.analytics_overview")}),s.jsx("div",{className:"header-controls",children:s.jsxs("div",{className:"period-selector",children:[s.jsx("button",{className:`period ${c==="week"?"active":""}`,onClick:()=>m("week"),children:e("admin.weekly")}),s.jsx("button",{className:`period ${c==="month"?"active":""}`,onClick:()=>m("month"),children:e("admin.monthly")})]})})]}),s.jsxs("div",{className:"card-content",children:[s.jsxs("div",{className:"chart-placeholder",children:[s.jsx(l,{className:"chart-icon"}),s.jsx("p",{children:e("admin.chart_placeholder")})]}),s.jsxs("div",{className:"metrics-grid",children:[s.jsxs("div",{className:"metric",children:[s.jsx("h4",{children:e("admin.page_views")}),s.jsx("div",{className:"metric-value",children:"2,543"}),s.jsxs("div",{className:"stat-change positive",children:[s.jsx(l,{}),s.jsx("span",{children:"+12.5%"})]})]}),s.jsxs("div",{className:"metric",children:[s.jsx("h4",{children:e("admin.avg_session")}),s.jsx("div",{className:"metric-value",children:"3:42"}),s.jsxs("div",{className:"stat-change positive",children:[s.jsx(l,{}),s.jsx("span",{children:"+2.1%"})]})]}),s.jsxs("div",{className:"metric",children:[s.jsx("h4",{children:e("admin.bounce_rate")}),s.jsx("div",{className:"metric-value",children:"42.3%"}),s.jsxs("div",{className:"stat-change negative",children:[s.jsx(l,{}),s.jsx("span",{children:"-1.8%"})]})]}),s.jsxs("div",{className:"metric",children:[s.jsx("h4",{children:e("admin.new_users")}),s.jsx("div",{className:"metric-value",children:"432"}),s.jsxs("div",{className:"stat-change positive",children:[s.jsx(l,{}),s.jsx("span",{children:"+22.4%"})]})]})]})]})]}),s.jsxs("div",{className:"quick-links dashboard-card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{children:e("admin.quick_links")})}),s.jsx("div",{className:"card-content",children:s.jsxs("div",{className:"quick-links-grid",children:[s.jsxs("button",{className:"quick-link-card",onClick:()=>n("/admin/listings/create"),children:[s.jsx(T,{className:"link-icon"}),s.jsx("span",{className:"link-label",children:e("admin.add_listing")})]}),s.jsxs("button",{className:"quick-link-card",onClick:()=>n("/admin/users"),children:[s.jsx(g,{className:"link-icon"}),s.jsx("span",{className:"link-label",children:e("admin.manage_users")})]}),s.jsxs("button",{className:"quick-link-card",onClick:()=>n("/admin/categories"),children:[s.jsx(L,{className:"link-icon"}),s.jsx("span",{className:"link-label",children:e("admin.categories")})]}),s.jsxs("button",{className:"quick-link-card",onClick:()=>n("/admin/settings"),children:[s.jsx(es,{className:"link-icon"}),s.jsx("span",{className:"link-label",children:e("admin.settings")})]})]})})]})]})]})};export{ds as default};
