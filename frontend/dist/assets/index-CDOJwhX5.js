import{u as f,q as b,a as N,f as c,t as w,K as v,r as k,j as e,H as L,F,M as y,N as A,L as d,O as C}from"./index-Ii0svv0K.js";const M=()=>{const{t:s}=f(),m=b(),i=N(),n=c(w),t=c(v),[l,h]=k.useState({email:"",password:"",remember:!1}),r=o=>{const{name:a,value:g,type:p,checked:x}=o.target;h(j=>({...j,[a]:p==="checkbox"?x:g}))},u=async o=>{o.preventDefault();try{console.log("Attempting login with:",l.email);const a=await m(C({email:l.email,password:l.password})).unwrap();console.log("Login successful, full result:",a),a.user?(console.log("User data:",a.user),console.log("User role:",a.user.role),a.user.role==="admin"?(console.log("User is admin, redirecting to /admin"),i("/admin")):(console.log("User is not admin, redirecting to /profile"),i("/profile"))):(console.error("No user data in response:",a),i("/profile"))}catch(a){console.error("Login failed:",a)}};return e.jsxs("div",{className:"auth-page",children:[e.jsxs(L,{children:[e.jsxs("title",{children:[s("login.pageTitle")," | Mart.az"]}),e.jsx("meta",{name:"description",content:s("login.metaDescription")})]}),e.jsxs("div",{className:"auth-container",children:[e.jsxs("div",{className:"auth-form-container",children:[e.jsx("h1",{className:"auth-title",children:s("login.title")}),e.jsx("p",{className:"auth-subtitle",children:s("login.subtitle")}),t&&e.jsxs("div",{className:"alert alert-danger",role:"alert",children:[e.jsx(F,{size:18}),e.jsx("span",{children:t})]}),e.jsxs("form",{onSubmit:u,className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:s("login.emailLabel")}),e.jsxs("div",{className:"input-icon-wrapper",children:[e.jsx(y,{className:"input-icon"}),e.jsx("input",{type:"email",id:"email",name:"email",value:l.email,onChange:r,required:!0,placeholder:s("login.emailPlaceholder"),className:"form-control"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:s("login.passwordLabel")}),e.jsxs("div",{className:"input-icon-wrapper",children:[e.jsx(A,{className:"input-icon"}),e.jsx("input",{type:"password",id:"password",name:"password",value:l.password,onChange:r,required:!0,placeholder:s("login.passwordPlaceholder"),className:"form-control"})]})]}),e.jsxs("div",{className:"form-extras",children:[e.jsxs("div",{className:"remember-me custom-checkbox",children:[e.jsx("input",{type:"checkbox",id:"remember",name:"remember",checked:l.remember,onChange:r}),e.jsx("label",{htmlFor:"remember",children:s("login.rememberMe")})]}),e.jsx(d,{to:"/forgot-password",className:"forgot-password-link",children:s("login.forgotPassword")})]}),e.jsx("button",{type:"submit",className:"btn-submit",disabled:n,children:s(n?"common.loading":"login.loginButton")})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:[s("login.noAccount")," ",e.jsx(d,{to:"/register",className:"auth-link",children:s("login.registerNow")})]})})]}),e.jsxs("div",{className:"auth-benefits",children:[e.jsx("h2",{children:s("login.benefitsTitle")}),e.jsxs("ul",{children:[e.jsx("li",{children:s("login.benefit1")}),e.jsx("li",{children:s("login.benefit2")}),e.jsx("li",{children:s("login.benefit3")}),e.jsx("li",{children:s("login.benefit4")})]})]})]})]})};export{M as default};
