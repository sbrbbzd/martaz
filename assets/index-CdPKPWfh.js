import{u as M,a as R,r as g,j as e,A as D,m as o,L as P,b as E,c as V,H}from"./index-CEw6XCQe.js";import{C as F,L as T,a as O}from"./index-fAhQA9LH.js";import"./imageUrl-1dNZjTSy.js";const U=({placeholder:s,trendingSearches:m=[],onSearch:c,className:p="",variant:w="default",showTrending:N=!0})=>{const{t:l}=M(),j=R(),[d,f]=g.useState(""),[v,x]=g.useState(!1),[L,y]=g.useState([]),S=g.useRef(null),k=g.useRef(null);g.useEffect(()=>{const r=localStorage.getItem("recentSearches");r&&y(JSON.parse(r).slice(0,5));const u=I=>{k.current&&!k.current.contains(I.target)&&S.current&&!S.current.contains(I.target)&&x(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[]);const h=()=>{if(!d.trim())return;const r=[d,...L.filter(u=>u!==d)].slice(0,5);y(r),localStorage.setItem("recentSearches",JSON.stringify(r)),c?c(d):j(`/search?q=${encodeURIComponent(d)}`),x(!1)},A=r=>{r.key==="Enter"&&h()},C=r=>{f(r),x(!1),setTimeout(()=>{c?c(r):j(`/search?q=${encodeURIComponent(r)}`)},100)},B={hidden:{opacity:0,y:-10,height:0},visible:{opacity:1,y:0,height:"auto"}};return e.jsxs("div",{className:`search-box search-box--${w} ${p}`,children:[e.jsxs("div",{className:"search-box__input-wrapper",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),e.jsx("input",{ref:S,type:"text",className:"search-box__input",placeholder:s||l("common.searchPlaceholder"),value:d,onChange:r=>f(r.target.value),onFocus:()=>x(!0),onKeyDown:A}),d&&e.jsx("button",{className:"search-box__clear",onClick:()=>f(""),"aria-label":l("common.clear"),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx("button",{className:"search-box__button",onClick:h,"aria-label":l("common.search"),children:w==="header"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}):l("common.search")})]}),e.jsx(D,{children:v&&(N||L.length>0)&&e.jsxs(o.div,{ref:k,className:"search-box__dropdown",initial:"hidden",animate:"visible",exit:"hidden",variants:B,transition:{duration:.2},children:[L.length>0&&e.jsxs("div",{className:"search-box__section",children:[e.jsxs("div",{className:"search-box__section-header",children:[e.jsx("span",{children:l("common.recentSearches")}),e.jsx("button",{className:"search-box__clear-all",onClick:()=>{y([]),localStorage.removeItem("recentSearches")},children:l("common.clearAll")})]}),e.jsx("ul",{className:"search-box__list",children:L.map((r,u)=>e.jsx("li",{children:e.jsxs("button",{className:"search-box__item",onClick:()=>C(r),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"23 4 23 10 17 10"}),e.jsx("polyline",{points:"1 20 1 14 7 14"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]}),e.jsx("span",{children:r})]})},`recent-${u}`))})]}),N&&m.length>0&&e.jsxs("div",{className:"search-box__section",children:[e.jsx("div",{className:"search-box__section-header",children:e.jsx("span",{children:l("common.trending")})}),e.jsx("ul",{className:"search-box__list",children:m.map((r,u)=>e.jsx("li",{children:e.jsxs("button",{className:"search-box__item",onClick:()=>C(r),children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}),e.jsx("polyline",{points:"16 7 22 7 22 13"})]}),e.jsx("span",{children:r})]})},`trending-${u}`))})]})]})})]})},z=({id:s,name:m,count:c=0,icon:p,onClick:w,slug:N})=>{const{t:l}=M(),j=p.includes(".svg"),d=()=>{w&&w()},f=N||s;return e.jsx(P,{to:`/${f}`,className:"category-card__link",onClick:d,children:e.jsxs(F,{variant:"default",className:"category-card",children:[e.jsx("div",{className:"category-card__icon-wrapper",children:j?e.jsx("img",{src:p,alt:m,className:"category-card__custom-icon",width:"48",height:"48"}):e.jsx("span",{className:"material-icons-outlined category-card__icon",children:p})}),e.jsx("h3",{className:"category-card__title",children:m}),e.jsxs("div",{className:"category-card__count",children:[c," ",l("items")]})]})})},b=({children:s,className:m="",size:c="lg",as:p="div"})=>e.jsx(p,{className:`container container--${c} ${m}`,children:s}),J=()=>{var $;const{t:s}=M(),m=R(),[c,p]=g.useState("all"),[w,N]=g.useState(0),l=["iPhone","Laptop","Apartment","Toyota","Sofa"],{data:j,isLoading:d,isError:f}=E({limit:8}),{data:v,isLoading:x,isError:L,refetch:y}=V(void 0,{refetchOnMountOrArgChange:!0,refetchOnReconnect:!0,refetchOnFocus:!0}),S=(($=j==null?void 0:j.data)==null?void 0:$.listings)||[],k=v||[];console.log("Listings Data:",j),console.log("Listings:",S),console.log("Categories Data:",v),console.log("Categories Loading:",x),console.log("Force render count:",w),g.useEffect(()=>{window.scrollTo(0,0),y();const t=setTimeout(()=>{N(a=>a+1)},300),i=setTimeout(()=>{!v&&!x&&(console.log("Backup timer triggered - refetching categories"),y()),N(a=>a+1)},1e3);return()=>{clearTimeout(t),clearTimeout(i)}},[y]),g.useEffect(()=>{v&&(console.log("Categories data loaded:",v.length),N(t=>t+1))},[v]);const h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},A={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},C=t=>{p(t)},B=t=>{m(`/listings?category=${t}`)},r=t=>{var _,n;if(t.icon)return t.icon;const i=((_=t.slug)==null?void 0:_.toLowerCase())||"",a=((n=t.name)==null?void 0:n.toLowerCase())||"";return i.includes("electronics")||a.includes("electronics")?"/assets/icons/category-electronics.svg":i.includes("vehicle")||a.includes("vehicle")||i.includes("car")||a.includes("car")?"/assets/icons/category-vehicles.svg":i.includes("real")||a.includes("real")||i.includes("estate")||a.includes("estate")||i.includes("property")||a.includes("property")||i.includes("home")||a.includes("home")?"/assets/icons/category-real-estate.svg":i.includes("job")||a.includes("job")||i.includes("work")||a.includes("work")?"/assets/icons/category-jobs.svg":i.includes("furniture")||a.includes("furniture")?"/assets/icons/category-furniture.svg":i.includes("service")||a.includes("service")?"/assets/icons/category-services.svg":"/assets/icons/category-default.svg"},u=()=>{console.log("Rendering categories, loading:",x,"forceRender:",w);const t=!v&&!x;let i=[];if(t)try{const n=localStorage.getItem("cached_categories");n&&(i=JSON.parse(n),console.log("Using cached categories from localStorage:",i.length))}catch(n){console.error("Failed to parse cached categories:",n)}if(x&&(!i||i.length===0))return Array(6).fill(0).map((n,W)=>e.jsx(o.div,{variants:h,children:e.jsxs("div",{className:"category-skeleton",children:[e.jsx("div",{className:"category-skeleton__icon"}),e.jsx("div",{className:"category-skeleton__name"}),e.jsx("div",{className:"category-skeleton__count"})]})},`skeleton-${W}`));if(L&&(!i||i.length===0))return e.jsx("div",{className:"error-message",children:s("errorLoadingCategories")});const a=k&&k.length>0?k:i;if(!a||a.length===0)return console.log("No categories available to display"),e.jsx("div",{className:"info-message",children:s("noCategoriesAvailable")});const _=a.filter(n=>!n.parentId);return console.log("Parent Categories:",_),_.length===0?(console.log("No parent categories to display"),e.jsx("div",{className:"info-message",children:s("noCategoriesAvailable")})):_.slice(0,6).map(n=>e.jsx(o.div,{variants:h,children:e.jsx(z,{id:n.id,name:n.name,icon:r(n),count:0,slug:n.slug,onClick:()=>B(n.slug)})},n.id))},I=()=>{if(d)return Array(6).fill(0).map((i,a)=>e.jsx("div",{className:"listing-skeleton"},a));if(f)return e.jsx("div",{className:"error-message",children:s("errorLoadingListings")});const t=[...S];return c==="latest"?t.sort((i,a)=>new Date(a.createdAt).getTime()-new Date(i.createdAt).getTime()):c==="popular"?t.sort((i,a)=>a.views-i.views):c==="featured"&&t.sort((i,a)=>i.isPromoted&&!a.isPromoted?-1:!i.isPromoted&&a.isPromoted?1:0),t.map(i=>{var a,_;return e.jsx(o.div,{variants:h,children:e.jsx(O,{id:i.id,slug:i.slug,title:i.title,price:i.price,currency:i.currency,location:i.location,featuredImage:i.featuredImage,categoryName:(a=i.category)==null?void 0:a.name,categorySlug:(_=i.category)==null?void 0:_.slug,isFeatured:i.isFeatured,isPromoted:i.isPromoted,createdAt:i.createdAt})},i.id)})};return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsxs("title",{children:[s("homepage.pageTitle")," | Mart.az"]}),e.jsx("meta",{name:"description",content:s("homepage.metaDescription")})]}),e.jsxs("div",{className:"home-page",children:[e.jsxs("section",{className:"hero",children:[e.jsx(b,{children:e.jsxs(o.div,{className:"hero__content",initial:"hidden",animate:"visible",variants:h,transition:{duration:.5},children:[e.jsx("h1",{className:"hero__title",children:s("homepage.heroTitle")}),e.jsx("p",{className:"hero__subtitle",children:s("homepage.heroSubtitle")}),e.jsx("div",{className:"hero__search",children:e.jsx(U,{placeholder:s("homepage.searchPlaceholder"),trendingSearches:l,showTrending:!0,onSearch:t=>{console.log("HomePage search triggered with:",t),m(`/listings?search=${encodeURIComponent(t)}`)}})})]})}),e.jsx("div",{className:"hero__wave",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",preserveAspectRatio:"none",children:e.jsx("path",{fill:"#ffffff",fillOpacity:"1",d:"M0,224L60,213.3C120,203,240,181,360,181.3C480,181,600,203,720,208C840,213,960,203,1080,192C1200,181,1320,171,1380,165.3L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"})})})]}),e.jsx("section",{className:"categories",children:e.jsxs(b,{children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:s("exploreCategories")}),e.jsx("p",{className:"section-subtitle",children:s("exploreCategoriesSubtitle")})]}),e.jsx(o.div,{className:"categories__grid",variants:A,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:u()}),e.jsx("div",{className:"categories__action",children:e.jsx(T,{to:"/categories",variant:"outline",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),e.jsx("polyline",{points:"12 5 19 12 12 19"})]}),children:s("viewAllCategories")})})]})}),e.jsx("section",{className:"featured-listings",children:e.jsxs(b,{children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:s("featuredListings")}),e.jsx("p",{className:"section-subtitle",children:s("featuredListingsSubtitle")}),e.jsxs("div",{className:"featured-tabs",children:[e.jsx("button",{className:`featured-tab ${c==="all"?"featured-tab--active":""}`,onClick:()=>C("all"),children:s("all")}),e.jsx("button",{className:`featured-tab ${c==="latest"?"featured-tab--active":""}`,onClick:()=>C("latest"),children:s("latest")}),e.jsx("button",{className:`featured-tab ${c==="popular"?"featured-tab--active":""}`,onClick:()=>C("popular"),children:s("popular")}),e.jsx("button",{className:`featured-tab ${c==="featured"?"featured-tab--active":""}`,onClick:()=>C("featured"),children:s("featured")})]})]}),e.jsx(o.div,{className:"featured-listings__grid",variants:A,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-50px"},children:I()}),e.jsx("div",{className:"featured-listings__action",children:e.jsx(T,{to:"/listings",variant:"primary",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),e.jsx("polyline",{points:"12 5 19 12 12 19"})]}),children:s("viewAllListings")})})]})}),e.jsx("section",{className:"how-it-works",children:e.jsxs(b,{children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:s("howItWorks")}),e.jsx("p",{className:"section-subtitle",children:s("howItWorksSubtitle")})]}),e.jsxs(o.div,{className:"how-it-works__steps",variants:A,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:[e.jsxs(o.div,{className:"step-card",variants:h,transition:{duration:.3},children:[e.jsx("div",{className:"step-card__icon",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"8.5",cy:"7",r:"4"}),e.jsx("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),e.jsx("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]})}),e.jsx("h3",{className:"step-card__title",children:s("createAccount")}),e.jsx("p",{className:"step-card__description",children:s("createAccountDescription")})]}),e.jsx("div",{className:"step-connector",children:e.jsx("svg",{width:"40",height:"12",viewBox:"0 0 40 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M40 6L30 0.226497V11.7735L40 6ZM0 7H31V5H0V7Z",fill:"currentColor"})})}),e.jsxs(o.div,{className:"step-card",variants:h,transition:{duration:.3,delay:.1},children:[e.jsx("div",{className:"step-card__icon",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]})}),e.jsx("h3",{className:"step-card__title",children:s("common.postAd")}),e.jsx("p",{className:"step-card__description",children:s("postAdDescription")})]}),e.jsx("div",{className:"step-connector",children:e.jsx("svg",{width:"40",height:"12",viewBox:"0 0 40 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M40 6L30 0.226497V11.7735L40 6ZM0 7H31V5H0V7Z",fill:"currentColor"})})}),e.jsxs(o.div,{className:"step-card",variants:h,transition:{duration:.3,delay:.2},children:[e.jsx("div",{className:"step-card__icon",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.42 4.58a5.4 5.4 0 0 0-7.65 0l-.77.78-.77-.78a5.4 5.4 0 0 0-7.65 0C1.46 6.7 1.33 10.28 4 13l8 8 8-8c2.67-2.72 2.54-6.3.42-8.42z"}),e.jsx("path",{d:"M12 5.36V8"}),e.jsx("path",{d:"M12 12v3"}),e.jsx("path",{d:"M12 20v1"})]})}),e.jsx("h3",{className:"step-card__title",children:s("connectWithBuyers")}),e.jsx("p",{className:"step-card__description",children:s("connectWithBuyersDescription")})]})]})]})}),e.jsx("section",{className:"cta",children:e.jsx(b,{children:e.jsxs(o.div,{className:"cta__content",initial:"hidden",whileInView:"visible",variants:h,viewport:{once:!0},transition:{duration:.5},children:[e.jsx("div",{className:"cta__image",children:e.jsx("img",{src:"/images/cta-illustration.svg",alt:""})}),e.jsxs("div",{className:"cta__text",children:[e.jsx("h2",{className:"cta__title",children:s("readyToSell")}),e.jsx("p",{className:"cta__description",children:s("readyToSellDescription")}),e.jsxs("ul",{className:"cta__benefits",children:[e.jsxs("li",{children:[e.jsx("span",{className:"material-icons",children:"check_circle"}),s("freeListing")]}),e.jsxs("li",{children:[e.jsx("span",{className:"material-icons",children:"check_circle"}),s("easyToUse")]}),e.jsxs("li",{children:[e.jsx("span",{className:"material-icons",children:"check_circle"}),s("secureCommunication")]})]}),e.jsx(T,{to:"/create-listing",variant:"accent",size:"lg",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),e.jsx("polyline",{points:"12 5 19 12 12 19"})]}),className:"cta__button",children:s("postAdNow")})]})]})})}),e.jsx("section",{className:"testimonials",children:e.jsxs(b,{children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{className:"section-title",children:s("happyUsers")}),e.jsx("p",{className:"section-subtitle",children:s("happyUsersSubtitle")})]}),e.jsxs("div",{className:"testimonials__slider",children:[e.jsxs("div",{className:"testimonial-card",children:[e.jsxs("div",{className:"testimonial-card__rating",children:[e.jsx("span",{className:"material-icons",children:"star"}),e.jsx("span",{className:"material-icons",children:"star"}),e.jsx("span",{className:"material-icons",children:"star"}),e.jsx("span",{className:"material-icons",children:"star"}),e.jsx("span",{className:"material-icons",children:"star"})]}),e.jsx("p",{className:"testimonial-card__text",children:'"I sold my car within 2 days of posting. The process was so simple and I got multiple inquiries right away!"'}),e.jsxs("div",{className:"testimonial-card__author",children:[e.jsx("img",{src:"https://randomuser.me/api/portraits/men/32.jpg",alt:"User",className:"testimonial-card__avatar"}),e.jsxs("div",{className:"testimonial-card__info",children:[e.jsx("h4",{className:"testimonial-card__name",children:"Eldar Mammadov"}),e.jsx("p",{className:"testimonial-card__location",children:"Baku, Azerbaijan"})]})]})]}),e.jsxs("div",{className:"testimonial-card",children:[e.jsxs("div",{className:"testimonial-card__rating",children:[e.jsx("span",{className:"material-icons",children:"star"}),e.jsx("span",{className:"material-icons",children:"star"}),e.jsx("span",{className:"material-icons",children:"star"}),e.jsx("span",{className:"material-icons",children:"star"}),e.jsx("span",{className:"material-icons",children:"star_half"})]}),e.jsx("p",{className:"testimonial-card__text",children:'"I found my apartment through Mart.az and the whole experience was great. The interface is easy to use and filters really helped narrow down my search."'}),e.jsxs("div",{className:"testimonial-card__author",children:[e.jsx("img",{src:"https://randomuser.me/api/portraits/women/44.jpg",alt:"User",className:"testimonial-card__avatar"}),e.jsxs("div",{className:"testimonial-card__info",children:[e.jsx("h4",{className:"testimonial-card__name",children:"Aysel Huseynova"}),e.jsx("p",{className:"testimonial-card__location",children:"Ganja, Azerbaijan"})]})]})]})]})]})}),e.jsx("section",{className:"download-app",children:e.jsx(b,{children:e.jsx("div",{className:"download-app__content",children:e.jsxs("div",{className:"download-app__info",children:[e.jsx("h2",{className:"download-app__title",children:s("downloadOurApp")}),e.jsx("p",{className:"download-app__description",children:s("downloadAppDescription")}),e.jsxs("div",{className:"download-app__buttons",children:[e.jsx("a",{href:"#",className:"app-button",children:e.jsx("img",{src:"assets/images/app-store.png",alt:"App Store"})}),e.jsx("a",{href:"#",className:"app-button",children:e.jsx("img",{src:"assets/images/google-play.png",alt:"Google Play"})})]})]})})})})]})]})};export{J as default};
