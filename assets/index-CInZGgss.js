import{u as M,r as l,aq as L,ar as T,as as P,j as e,al as u,y as R,f as I,at as $,au as q,a6 as z,av as D,aw as G,a7 as J}from"./index-CEw6XCQe.js";const Q=()=>{var b,f;const{t:a}=M(),[n,d]=l.useState(1),[c,o]=l.useState({}),[m,x]=l.useState(""),[S,U]=l.useState(null),{data:t,isLoading:y,isError:C,error:r,refetch:A}=L({page:n,limit:10,...c}),[F,{isLoading:j}]=T(),[k,{isLoading:w}]=P(),p=()=>{o(s=>({...s,search:m})),d(1)},v=(s,i)=>{o(h=>({...h,[s]:i})),d(1)},g=async(s,i)=>{try{await F({id:s,status:i}).unwrap()}catch(h){console.error("Failed to update user status:",h)}},E=async s=>{if(window.confirm(a("admin.users.deleteConfirmation","Are you sure you want to delete this user? This action cannot be undone.")))try{await k(s).unwrap()}catch(i){console.error("Failed to delete user:",i)}},N=s=>{d(s)};return y?e.jsx(u,{children:e.jsxs("div",{className:"admin-loading",children:[e.jsx(R,{}),e.jsx("p",{children:a("admin.users.loading","Loading users data...")})]})}):C||!t?e.jsx(u,{children:e.jsxs("div",{className:"admin-error",children:[e.jsx(I,{size:48}),e.jsx("h2",{children:a("admin.users.error","Error loading users")}),e.jsx("p",{children:r&&typeof r=="object"&&"message"in r?r.message:a("admin.users.serverError","The server encountered an error. This could be due to maintenance or high traffic.")}),e.jsx("button",{onClick:()=>A(),className:"retry-button",children:a("admin.users.retry","Retry")})]})}):e.jsx(u,{children:e.jsxs("div",{className:"admin-users",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:a("admin.users.title","User Management")}),e.jsxs("button",{className:"add-button",children:[e.jsx($,{}),a("admin.users.addNew","Add New User")]})]}),e.jsxs("div",{className:"filters-section",children:[e.jsxs("div",{className:"search-box",children:[e.jsx("input",{type:"text",placeholder:a("admin.users.search","Search users..."),value:m,onChange:s=>x(s.target.value),onKeyPress:s=>s.key==="Enter"&&p()}),e.jsx("button",{onClick:p,children:e.jsx(q,{})})]}),e.jsxs("div",{className:"filter-controls",children:[e.jsxs("div",{className:"filter-group",children:[e.jsxs("label",{children:[a("admin.users.filterStatus","Status"),":"]}),e.jsxs("select",{onChange:s=>v("status",s.target.value),value:c.status||"",children:[e.jsx("option",{value:"",children:a("admin.all","All")}),e.jsx("option",{value:"active",children:a("admin.users.statusActive","Active")}),e.jsx("option",{value:"inactive",children:a("admin.users.statusInactive","Inactive")}),e.jsx("option",{value:"suspended",children:a("admin.users.statusSuspended","Suspended")})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsxs("label",{children:[a("admin.users.filterRole","Role"),":"]}),e.jsxs("select",{onChange:s=>v("role",s.target.value),value:c.role||"",children:[e.jsx("option",{value:"",children:a("admin.all","All")}),e.jsx("option",{value:"user",children:a("admin.users.roleUser","User")}),e.jsx("option",{value:"admin",children:a("admin.users.roleAdmin","Admin")}),e.jsx("option",{value:"moderator",children:a("admin.users.roleModerator","Moderator")})]})]}),e.jsx("button",{className:"reset-filters",onClick:()=>{o({}),x("")},children:a("admin.resetFilters","Reset Filters")})]})]}),e.jsxs("div",{className:"users-table-container",children:[e.jsxs("table",{className:"users-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:a("admin.users.id","ID")}),e.jsx("th",{children:a("admin.users.name","Name")}),e.jsx("th",{children:a("admin.users.email","Email")}),e.jsx("th",{children:a("admin.users.role","Role")}),e.jsx("th",{children:a("admin.users.status","Status")}),e.jsx("th",{children:a("admin.users.joinDate","Join Date")}),e.jsx("th",{children:a("admin.users.actions","Actions")})]})}),e.jsx("tbody",{children:(b=t==null?void 0:t.users)==null?void 0:b.map(s=>{var i;return e.jsxs("tr",{className:S===s.id?"selected":"",children:[e.jsxs("td",{children:[s.id.substring(0,8),"..."]}),e.jsx("td",{children:e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"user-avatar",children:s.profileImage?e.jsx("img",{src:s.profileImage,alt:`${s.firstName} ${s.lastName}`}):e.jsx("div",{className:"avatar-placeholder",children:((i=s.firstName)==null?void 0:i[0])||s.email[0]})}),e.jsx("div",{children:e.jsxs("p",{className:"user-name",children:[s.firstName," ",s.lastName]})})]})}),e.jsx("td",{children:s.email}),e.jsx("td",{children:e.jsx("span",{className:`role-badge ${s.role}`,children:s.role})}),e.jsx("td",{children:e.jsx("span",{className:`status-badge ${s.status}`,children:s.status})}),e.jsx("td",{children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("td",{className:"actions-cell",children:[e.jsx("button",{className:"action-button edit",onClick:()=>U(s.id),children:e.jsx(z,{})}),s.status==="active"?e.jsx("button",{className:"action-button suspend",onClick:()=>g(s.id,"suspended"),disabled:j,children:e.jsx(D,{})}):e.jsx("button",{className:"action-button activate",onClick:()=>g(s.id,"active"),disabled:j,children:e.jsx(G,{})}),e.jsx("button",{className:"action-button delete",onClick:()=>E(s.id),disabled:w,children:e.jsx(J,{})})]})]},s.id)})})]}),((f=t==null?void 0:t.users)==null?void 0:f.length)===0&&e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:a("admin.users.noUsers","No users found matching your criteria.")})})]}),e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>N(n-1),disabled:n<=1,children:a("admin.prev","Previous")}),e.jsxs("span",{children:[a("admin.page","Page")," ",n," ",a("admin.of","of")," ",Math.ceil(((t==null?void 0:t.total)||0)/10)]}),e.jsx("button",{onClick:()=>N(n+1),disabled:n>=Math.ceil(((t==null?void 0:t.total)||0)/10),children:a("admin.next","Next")})]})]})})};export{Q as default};
